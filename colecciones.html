<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Colecciones</title>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';

        const supabaseUrl = "https://stasakmcnscgdqphhsou.supabase.co";
        const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN0YXNha21jbnNjZ2RxcGhoc291Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM0NjI4NzUsImV4cCI6MjA1OTAzODg3NX0.slsteyy0PHxuMzc0k0OL6EZmca-twQKymNs0rp000Vo";
        const supabase = createClient(supabaseUrl, supabaseKey);

        async function obtenerProductosPorTemporada(temporada) {
            let { data: productos, error } = await supabase
                .from('productos')
                .select('*')
                .eq('temporada', temporada)
                .limit(6); 

            if (error) {
                console.error(`Error al obtener productos para la temporada ${temporada}:`, error);
                return [];
            }
            return productos;
        }

        async function mostrarColecciones() {
            const temporadas = ['Otono', 'Invierno', 'Primavera', 'Verano'];

            for (let temporada of temporadas) {
                const contenedor = document.getElementById(`productos-${temporada.toLowerCase()}`);
                if (!contenedor) {
                    console.error(`No se encontró el contenedor para la temporada ${temporada}.`);
                    continue;
                }

                const productos = await obtenerProductosPorTemporada(temporada);

                if (productos.length > 0) {
                    let html = productos.map(producto => `
                        <div class="producto">
                            <img src="${producto.image}" alt="${producto.nombre}">
                            <p>${producto.nombre}</p>
                            <p>$${producto.precio}</p>
                        </div>
                    `).join('');
                    contenedor.innerHTML = html;
                } else {
                    contenedor.innerHTML = "<p>No se encontraron productos para esta temporada.</p>";
                }
            }
        }

        document.addEventListener("DOMContentLoaded", mostrarColecciones);
    </script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; background-color: #f5f5f5; }
        .colaboracion { position: relative; margin: 20px auto; padding: 20px; border-radius: 15px; max-width: 800px; color: white; overflow: hidden; }
        .productos-container { display: flex; flex-wrap: wrap; justify-content: center; }
        .producto { margin: 10px; padding: 10px; background: rgba(255, 255, 255, 0.2); border-radius: 10px; width: 150px; text-align: center; }
        .producto img { width: 100px; height: 100px; object-fit: cover; border-radius: 5px; }

        /* Estilos de las temporadas */
        #productos-otono { background: url('Recursos/otono.jpg') no-repeat center center/cover; }
        #productos-invierno { background: url('Recursos/invierno.jpg') no-repeat center center/cover; }
        #productos-primavera { background: url('Recursos/primavera.jpg') no-repeat center center/cover; }
        #productos-verano { background: url('Recursos/verano.jpg') no-repeat center center/cover; }

        /* Fondo oscuro y transparencia para el texto */
        .colaboracion h2 {
            background-color: rgba(0, 0, 0, 0.5);
            padding: 10px;
            border-radius: 5px;
            font-size: 1.8rem;
        }

        .colaboracion p {
            background-color: rgba(0, 0, 0, 0.3);
            padding: 5px;
            border-radius: 5px;
            font-size: 1rem;
        }

        /* Efectos de animación */
        .colaboracion:hover {
            transform: scale(1.05);
            transition: transform 0.3s ease-in-out;
        }

        .colaboracion h2:hover {
            color: #FFD700;
            transition: color 0.3s ease-in-out;
        }

        /* Botón */
        button { background: #000; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 5px; }
        button:hover { transform: scale(1.1); }

        /* Navegación */
        nav { background-color: #222; padding: 15px; }
        .menu { list-style: none; display: flex; justify-content: center; gap: 20px; }
        .menu li { display: inline; }
        .menu a { color: white; text-decoration: none; padding: 10px; font-size: 1.1rem; }
    </style>
</head>
<body>
    <nav>
        <ul class="menu">
            <li><a href="inicio.html">Inicio</a></li>
            <li><a href="colecciones.html">Colecciones</a></li>
            <li><a href="tendencias.html">Tendencias</a></li>
            <li><a href="colaboraciones.html">Colaboraciones</a></li>
            <li><a href="lookbook.html">Lookbook</a></li>
            <li><a href="contacto.html">Contacto</a></li>
        </ul>
    </nav>

    <h1>Colecciones</h1>

    <div id="temporada-actual"></div>

    <div class="otras-temporadas" id="otras-temporadas"></div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            function obtenerTemporadaActual() {
                const fecha = new Date();
                const mes = fecha.getMonth() + 1;
                if (mes >= 3 && mes <= 5) return "primavera";
                if (mes >= 6 && mes <= 8) return "verano";
                if (mes >= 9 && mes <= 11) return "otono";
                return "invierno";
            }

            function generarHTMLTemporada(nombre) {
                const contenedor = document.createElement("div");
                contenedor.classList.add("colaboracion");
                contenedor.id = nombre;
                contenedor.innerHTML = `
                    <h2>${nombre === "otono" ? "Otoño" : nombre.charAt(0).toUpperCase() + nombre.slice(1)}</h2>
                    <div id="productos-${nombre}" class="productos-container"></div>
                    <button onclick="window.location.href='${nombre}.html'">Ver más</button>
                `;
                return contenedor;
            }

            const temporadaActual = obtenerTemporadaActual();
            const todasLasTemporadas = ["otono", "invierno", "primavera", "verano"];
            const otrasTemporadas = todasLasTemporadas.filter(t => t !== temporadaActual);

            document.getElementById("temporada-actual").appendChild(generarHTMLTemporada(temporadaActual));

            const contenedorSecundario = document.getElementById("otras-temporadas");
            otrasTemporadas.forEach(t => contenedorSecundario.appendChild(generarHTMLTemporada(t)));
        });
    </script>

</body>
</html>
